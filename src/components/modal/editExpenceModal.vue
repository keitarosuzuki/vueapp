<template>
    <div class="edit-expence-modal">
        <div
            class="modal fade"
            id="huga"
            data-bs-backdrop="static"
            data-bs-keyboard="false"
            tabindex="-1"
            aria-labelledby="staticBackdropLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">
                            {{ textCurrentYearMonthDay }} ã®å‡ºè²»
                        </h5>
                        <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                            @click="clearModalVal"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <form class="form-floating huga" autocomplete="off">
                            <input
                                type="text"
                                class="form-control"
                                id="floatingInputValue"
                                placeholder="é£Ÿè²» {{ aaa.food }}å††ã‚’ä¿®æ­£"
                                v-model="exInputs['exInput0']"
                            />
                            <label for="floatingInputValue"
                                >é£Ÿè²» {{ aaa.food }}å††ã‚’ä¿®æ­£</label
                            >
                        </form>
                        <form class="form-floating huga" autocomplete="off">
                            <input
                                type="text"
                                class="form-control"
                                id="floatingInputValue"
                                placeholder="æ—¥ç”¨å“ {{ aaa.daily }}å††ã‚’ä¿®æ­£"
                                v-model="exInputs['exInput1']"
                            />
                            <label for="floatingInputValue"
                                >æ—¥ç”¨å“ {{ aaa.daily }}å††ã‚’ä¿®æ­£</label
                            >
                        </form>
                        <form class="form-floating huga" autocomplete="off">
                            <input
                                type="text"
                                class="form-control"
                                id="floatingInputValue"
                                placeholder="é€šä¿¡è²» {{ aaa.commu }}å††ã‚’ä¿®æ­£"
                                v-model="exInputs['exInput2']"
                            />
                            <label for="floatingInputValue"
                                >é€šä¿¡è²» {{ aaa.commu }}å††ã‚’ä¿®æ­£</label
                            >
                        </form>
                        <form class="form-floating huga" autocomplete="off">
                            <input
                                type="text"
                                class="form-control"
                                id="floatingInputValue"
                                placeholder="æ°´é“å…‰ç†±è²» {{ aaa.utilities }}å††ã‚’ä¿®æ­£"
                                v-model="exInputs['exInput3']"
                            />
                            <label for="floatingInputValue"
                                >æ°´é“å…‰ç†±è²» {{ aaa.utilities }}å††ã‚’ä¿®æ­£</label
                            >
                        </form>
                        <form class="form-floating huga" autocomplete="off">
                            <input
                                type="text"
                                class="form-control"
                                id="floatingInputValue"
                                placeholder="åŒ»ç™‚è²» {{ aaa.medical }}å††ã‚’ä¿®æ­£"
                                v-model="exInputs['exInput4']"
                            />
                            <label for="floatingInputValue"
                                >åŒ»ç™‚è²» {{ aaa.medical }}å††ã‚’ä¿®æ­£</label
                            >
                        </form>
                        <form class="form-floating huga" autocomplete="off">
                            <input
                                type="text"
                                class="form-control"
                                id="floatingInputValue"
                                placeholder="ä¿é™ºæ–™ {{ aaa.premium }}å††ã‚’ä¿®æ­£"
                                v-model="exInputs['exInput5']"
                            />
                            <label for="floatingInputValue"
                                >ä¿é™ºæ–™ {{ aaa.premium }}å††ã‚’ä¿®æ­£</label
                            >
                        </form>
                        <form class="form-floating huga" autocomplete="off">
                            <input
                                type="text"
                                class="form-control"
                                id="floatingInputValue"
                                placeholder="å®¶è³ƒ {{ aaa.rent }}å††ã‚’ä¿®æ­£"
                                v-model="exInputs['exInput6']"
                            />
                            <label for="floatingInputValue"
                                >å®¶è³ƒ {{ aaa.rent }}å††ã‚’ä¿®æ­£</label
                            >
                        </form>
                        <form class="form-floating huga" autocomplete="off">
                            <input
                                type="text"
                                class="form-control"
                                id="floatingInputValue"
                                placeholder="äº¤é€šè²» {{ aaa.trans }}å††ã‚’ä¿®æ­£"
                                v-model="exInputs['exInput7']"
                            />
                            <label for="floatingInputValue"
                                >äº¤é€šè²» {{ aaa.trans }}å††ã‚’ä¿®æ­£</label
                            >
                        </form>
                        <form class="form-floating huga" autocomplete="off">
                            <input
                                type="text"
                                class="form-control"
                                id="floatingInputValue"
                                placeholder="ãã®ä»–å‡ºè²» {{ aaa.common }}å††ã‚’ä¿®æ­£"
                                v-model="exInputs['exInput8']"
                            />
                            <label for="floatingInputValue"
                                >ãã®ä»–å‡ºè²» {{ aaa.common }}å††ã‚’ä¿®æ­£</label
                            >
                        </form>
                        <!-- <div class="input-group">
                            <div class="form-floating">
                                <input
                                    type="text"
                                    class="form-control hoge"
                                    id="floatingInputValue1"
                                    autocomplete="off"
                                    placeholder="ç«‹æ›¿è²» {{ aaa.advances }}å††ã‚’ä¿®æ­£"
                                    v-model="exInputs['exInput9']"
                                />
                                <label for="floatingInputValue1"
                                    >ç«‹æ›¿è²» {{ aaa.advances }}å††ã‚’ä¿®æ­£</label
                                >
                            </div>
                            <div class="form-floating">
                                <input
                                    type="text"
                                    class="form-control hoge"
                                    id="floatingInputValue2"
                                    autocomplete="off"
                                    placeholder="ğŸ‘ˆ ãªã‚“ã®ï¼Ÿ"
                                    v-model="exInputs['exInput10']"
                                />
                                <label for="floatingInputValue2"
                                    >ğŸ‘ˆ ãªã‚“ã®ï¼Ÿ</label
                                >
                            </div>
                        </div> -->
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                            @click="clearModalVal"
                        >
                            Close
                        </button>
                        <button
                            type="button"
                            class="btn btn-outline-warning"
                            data-bs-dismiss="modal"
                            @click="registerExpenceVal"
                        >
                            æ›´æ–°
                        </button>
                        <button
                            type="button"
                            class="btn btn-danger"
                            data-bs-dismiss="modal"
                            @click="deleteExpenceVal"
                        >
                            å‰Šé™¤
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
/* eslint-disable */
import firebase from "firebase/compat/app";
import "firebase/compat/database";
import { mapState, mapGetters } from "vuex";

export default {
    name: "editExpenceModal",
    data() {
        return {
            aryAccountTitle: [
                "é£Ÿè²»",
                "æ—¥ç”¨å“",
                "é€šä¿¡è²»",
                "æ°´é“å…‰ç†±è²»",
                "åŒ»ç™‚è²»",
                "ä¿é™ºæ–™",
                "å®¶è³ƒ",
                "äº¤é€šè²»",
                "ãã®ä»–å‡ºè²»", //ğŸ‘ˆæœé£¾è²»ã€å¨¯æ¥½è²»ã¿ãŸã„ã«åˆ†ã‘ãŸã„ã­
            ],
            exInputs: {
                exInput0: "",
                exInput1: "",
                exInput2: "",
                exInput3: "",
                exInput4: "",
                exInput5: "",
                exInput6: "",
                exInput7: "",
                exInput8: "",
                // exInput9: "",
                // exInput10: "",
            },
        };
    },
    methods: {
        clearModalVal() {
            this.exInputs["exInput0"] = ""
            this.exInputs["exInput1"] = ""
            this.exInputs["exInput2"] = ""
            this.exInputs["exInput3"] = ""
            this.exInputs["exInput4"] = ""
            this.exInputs["exInput5"] = ""
            this.exInputs["exInput6"] = ""
            this.exInputs["exInput7"] = ""
            this.exInputs["exInput8"] = ""
            this.$store.commit("modosu")
        },
        registerExpenceVal() {
            var result = confirm("æ›´æ–°ã—ã¾ã™ã‹ï¼Ÿ");
            if (result) {
                let registYM = this.registYearMonth;
                let registD = this.registDay;

                // ç©ºã ã£ãŸå ´åˆã¯å…¥ã‚ŒãªãŠã™
                if (!this.exInputs["exInput0"]) {
                    this.exInputs["exInput0"] = this.aaa.food;
                }
                if (!this.exInputs["exInput1"]) {
                    this.exInputs["exInput1"] = this.aaa.daily;
                }
                if (!this.exInputs["exInput2"]) {
                    this.exInputs["exInput2"] = this.aaa.commu;
                }
                if (!this.exInputs["exInput3"]) {
                    this.exInputs["exInput3"] = this.aaa.utilities;
                }
                if (!this.exInputs["exInput4"]) {
                    this.exInputs["exInput4"] = this.aaa.medical;
                }
                if (!this.exInputs["exInput5"]) {
                    this.exInputs["exInput5"] = this.aaa.premium;
                }
                if (!this.exInputs["exInput6"]) {
                    this.exInputs["exInput6"] = this.aaa.rent;
                }
                if (!this.exInputs["exInput7"]) {
                    this.exInputs["exInput7"] = this.aaa.trans;
                }
                if (!this.exInputs["exInput8"]) {
                    this.exInputs["exInput8"] = this.aaa.common;
                }

                firebase
                    .database()
                    .ref("huga/" + registYM + "/" + registD + "/ex/")
                    .update({
                        food: this.exInputs["exInput0"],
                        daily: this.exInputs["exInput1"],
                        commu: this.exInputs["exInput2"],
                        utilities: this.exInputs["exInput3"],
                        medical: this.exInputs["exInput4"],
                        premium: this.exInputs["exInput5"],
                        rent: this.exInputs["exInput6"],
                        trans: this.exInputs["exInput7"],
                        common: this.exInputs["exInput8"],
                        // advances: this.exInputs["exInput9"],
                        // reason: this.exInputs["exInput10"],
                    });
                this.clearModalVal();
            } else {
                this.clearModalVal();
                return;
            }
        },
        deleteExpenceVal() {
            var result = confirm("å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ");
            if (result) {
                let registYM = this.registYearMonth;
                let registD = this.registDay;
                firebase
                    .database()
                    .ref("huga/" + registYM + "/" + registD + "/ex")
                    .remove();
            } else {
                return;
            }
        },
        reRegisterExpenceVal() {},
        // checkValInput(input) {
        //     var regexp = new RegExp(/^[0-9]+(\.[0-9]+)?$/);
        //     if (!regexp.test(input) || input == 0) {
        //         this.flagCheckInput = true;
        //         return true;
        //     }
        // },
        // exObj(obj, ym){
        //     let val = obj.ym;
        //     return val
        // },
    },
    computed: {
        // textPrice() {
        //     return this.valInput.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
        // },
        ...mapState(["textCurrentYearMonthDay", "aaa"]),
        ...mapGetters(["registYearMonth", "registDay"]),
    },
};
</script>

<style scoped>
.hoge {
    padding-right: 24.5px;
}
.huga {
    padding-bottom: 6px;
}
</style>